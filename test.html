{% load static %}
{% load mes_tags %}
<!doctype html>
<html data-theme="corporate">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@2.41.0/dist/full.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href='{% static "css/style.css" %}'>
</head>
<body class="w-full h-screen bg-slate-200 p-4 flex flex-col-reverse lg:flex-row gap-4 relative text-gray-500">

<!--nav bar-->
{% include 'distribution/navbar.html' %}
<!--end nav bar-->

<!--main-->
<div class="w-full h-full overflow-hidden flex gap-4">
    <div class="w-[37%] h-full flex-none">
        <div class="w-full h-full flex flex-col gap-2">
            <span class="text-sm font-semibold  px-6 capitalize">achats</span>
            <div class="w-full h-full backprimer text-white flex flex-col gap-8 2xl:gap-14 p-4 2xl:p-6">
                <div class="w-full h-fit grid grid-cols-5 gap-4">
                    <div class="w-full h-full flex flex-col gap-2  col-span-2">
                        <span class="text-xs font-medium flex-none capitalize">objectif annuel</span>
                        <span class="text-4xl text-green-400 font-bold">{{ obj_annuel_p }}%</span>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 col-span-3 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">achats annuelle</span>
                            <a href="#" class="w-5 h-5 bg-blue-900 flex items-center justify-center">
                                <i class="uil uil-arrow-up-right text-sm"></i>
                            </a>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold">{{ achat_annuelle }} <span
                                class="text-xs font-medium">DA</span></span>
                    </div>
                </div>


                <div class="w-full h-fit grid grid-cols-5 gap-4">
                    <div class="w-full h-full flex flex-col gap-2  col-span-2">
                        <span class="text-xs font-medium flex-none capitalize">objectif mensuel</span>
                        <span class="text-4xl text-red-400 font-bold">{{ obj_menssuel_p }}</span>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 col-span-3 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">achats mensuelles</span>
                            <a href="#" class="w-5 h-5 bg-blue-900 flex items-center justify-center">
                                <i class="uil uil-arrow-up-right text-sm"></i>
                            </a>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold">{{ achat_menssuelle }} <span
                                class="text-xs font-medium">DA</span></span>
                    </div>
                </div>


                <div class="w-full h-fit grid grid-cols-2 gap-4">
                    <div class="w-full h-full flex flex-col gap-2  col-span-1">
                        <span class="text-xs font-medium flex-none capitalize">ristourne allouée</span>
                        <span class="text-xl 2xl:text-2xl text-white font-bold">{{ ristourn_a|floate_redefined }}<span
                                class="text-xs font-medium">DA</span></span>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 col-span-1 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">ristourne non-allouée</span>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-white font-bold">{{ ristourn_na|floate_redefined }}<span
                                class="text-xs font-medium">DA</span></span>
                    </div>
                </div>


                <div class="w-full grow">
                    <canvas id="line-chart" width="100"></canvas>
                </div>
            </div>
        </div>
    </div>


    <div class="w-[37%] h-full flex-none">
        <div class="w-full h-full flex flex-col gap-2">
            <span class="text-sm font-semibold capitalize px-6">créances</span>
            <div class="w-full h-full backprimer text-white  flex flex-col gap-8 2xl:gap-14 p-4 2xl:p-6">
                <div class="w-full h-fit grid grid-cols-5 gap-4">
                    <div class="w-full h-full flex flex-col gap-2  col-span-2">
                        <span class="text-xs font-medium flex-none capitalize">délais de payement</span>
                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold capitalize">{{ echeance_jour }} <span class="text-lg">jours</span></span>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 col-span-3 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">plafonnement</span>
                            <a href="#" class="w-5 h-5 bg-blue-900 flex items-center justify-center">
                                <i class="uil uil-arrow-up-right text-sm"></i>
                            </a>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold">{{ plafonnement|floate_redefined }}<span
                                class="text-xs font-medium">DA</span></span>
                    </div>
                </div>

                <div class="w-full h-fit grid grid-cols-5 gap-4">
                    <div class="w-full h-full flex flex-col gap-2  col-span-2">
                        <span class="text-xs font-medium flex-none capitalize">taux des en cours</span>
                        <span class="text-4xl text-green-400 font-bold">{{ en_cour_p |floate_redefined }}</span>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 col-span-3 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">en cours</span>
                            <a href="#" class="w-5 h-5 bg-blue-900 flex items-center justify-center">
                                <i class="uil uil-arrow-up-right text-sm"></i>
                            </a>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold">{{ en_cour |floate_redefined}} <span
                                class="text-xs font-medium">DA</span></span>
                    </div>
                </div>
                <div class="w-full h-fit grid grid-cols-4 gap-4">
                    <div class="w-full h-full flex flex-col gap-2 col-span-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium  capitalize">créances totale</span>
                            <a href="#" class="w-5 h-5 bg-blue-900 flex items-center justify-center">
                                <i class="uil uil-arrow-up-right text-sm"></i>
                            </a>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold">{{ TotalCre|floate_redefined }} <span
                                class="text-xs font-medium">DA</span></span>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 col-span-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium  capitalize">créances échues</span>
                            <a href="#" class="w-5 h-5 bg-blue-900 flex items-center justify-center">
                                <i class="uil uil-arrow-up-right text-sm"></i>
                            </a>
                        </div>

                        <span class="text-xl 2xl:text-2xl text-slate-200 font-bold">{{ TotalCreE|floate_redefined }} <span
                                class="text-xs font-medium">DA</span></span>
                    </div>
                </div>


                <div class="w-full grow">
                    <canvas id="bar-chart-grouped" width="100"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="flex-1 h-full flex-none">
        <div class="w-full h-full flex flex-col gap-2">

            <div class="w-full flex flex-col gap-2">
                <span class="text-sm font-semibold capitalize px-6 capitalize">top commandes</span>
                <div class="w-full h-full p-6 bg-white">
                    <canvas id="pie-chart" height="60" width="100"></canvas>
                </div>
            </div>


            <div class="w-full flex flex-col gap-2">
                <span class="text-sm font-semibold capitalize px-6 capitalize">commandes</span>
                <div class="w-full h-full p-4 2xl:p-6 bg-white flex flex-col gap-4">

                    <div class="w-full h-full flex flex-col gap-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">receptions et enregistrement</span>
                            <span class="text-xl text-primary font-bold">{{ r_e }}</span>
                        </div>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">validation et traitement</span>
                            <span class="text-xl text-primary font-bold">{{ v_t }}</span>
                        </div>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">preparation</span>
                            <span class="text-xl text-primary font-bold">{{ prep }}</span>
                        </div>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">en cours d'expedition</span>
                            <span class="text-xl text-primary font-bold">{{ e_c }}</span>
                        </div>
                    </div>
                </div>

            </div>


            <div class="w-full flex flex-col gap-2">
                <span class="text-sm font-semibold capitalize px-6">Reclamations Et Intervention</span>
                <div class="w-full p-4 2xl:p-6 bg-white flex flex-col gap-4">
                    <div class="w-full h-full flex flex-col gap-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">reclamations non traitées</span>
                            <span class="text-xl text-primary font-bold">{{ rc_nbr }}</span>
                        </div>
                    </div>

                    <div class="w-full h-full flex flex-col gap-2 justify-between">
                        <div class="w-full flex justify-between gap-5 items-center">
                            <span class="text-xs font-medium capitalize">intervention non traitées</span>
                            <span class="text-xl text-primary font-bold">{{ int_nbr }}</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>

<!--sign out modal-->
<input type="checkbox" id="my-modal" class="modal-toggle"/>
<div class="modal">
    <div class="modal-box text-slate-200 backprimer">
        <p class="py-4">Voulez-vous vraiment vous déconnectez !</p>
        <div class="modal-action">
            <label for="my-modal" class="btn text-white bg-primary hover:bg-blue-900">rester</label>
            <label for="my-modal" class="btn   backprimer hover:bg-blue-900 border-none  ">déconnecter</label>
        </div>
    </div>
</div>
<!--end sign out modal-->

<script>
    new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
            labels: {{ graphe1.mois }},
            datasets: [{
                data: {{ graphe1.valeur }},
                label: "ventes",
                borderColor: "#fff",
                fill: false
            },
            ]
        },

        options: {
            legend: {
                labels: {
                    fontColor: "white",
                }
            },
            scales: {
                yAxes: [{
                    ticks: {
                        fontColor: "white",
                    }
                }],
                xAxes: [{
                    ticks: {
                        fontColor: "white",
                    }
                }]
            }
        }
    });

    new Chart(document.getElementById("bar-chart-grouped"), {
        type: 'bar',
        data: {
            labels: {{ graph_bar.mois }},
            datasets: [
                {
                    label: "Encaissement",
                    backgroundColor: "#86efac",
                    data: {{ graph_bar.encaissement }}
                }, {
                    label: "Créance",
                    backgroundColor: "#60a5fa",
                    data: {{ graph_bar.creance }}
                }
            ]
        },
        options: {
            legend: {
                labels: {
                    fontColor: "white",
                }
            },
            scales: {
                yAxes: [
                    {
                        ticks: {
                            fontColor: "white",
                        }
                    }],
                xAxes: [{
                    ticks: {
                        fontColor: "white",
                    }
                }]
            }
        }
    });


    new Chart(document.getElementById("pie-chart"), {
        type: 'pie',
        data: {
            labels: {{ graph_5_famille.produit|safe }},
            datasets: [{
                backgroundColor: ["#f87171", "#4B6BFB", "#4ade80", "#FFC300", "#238E52"],
                data: {{ graph_5_famille.valeur }}
            }]
        },
    });


</script>
</body>
</html>